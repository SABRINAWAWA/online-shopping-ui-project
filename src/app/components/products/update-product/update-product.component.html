<div class="wrapper">
    <form (ngSubmit)="updateProduct()" #productForm="ngForm" class="update-product-form" ngNativeValidate>
        <h3 class="address-form-header">Update Product</h3>
        <div class="row mb-3">
            <label for="categoryId" class="col-sm-3 col-form-label">Category: </label>
            <div class="col-sm-9">
                <select id="categoryId" id="categoryId" [(ngModel)]="productRequest.categoryId" name="categoryId"
                    min="1" #categoryId="ngModel" required>
                    <option value="" disabled>Select a category</option>
                    <option *ngFor="let categoryName of category" [value]="categoryName.id">
                        {{ categoryName.description }}
                    </option>
                </select>
            </div>
            <div *ngIf="categoryId?.invalid && categoryId?.touched" class="error">
                A valid Category is required.
            </div>
        </div>

        <!-- Name field -->
        <div class="row mb-3">
            <label for="name" class="col-sm-3 col-form-label">Product name</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="name" [(ngModel)]="productRequest.name" name="name"
                    minlength="2" #name="ngModel" required>
                <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
                    <div *ngIf="name.errors?.['required']">Product name is required.</div>
                    <div *ngIf="name.errors?.['minlength']">
                        Product name must be at least 2 characters long.
                    </div>
                </div>
            </div>
        </div>

        <!-- Description field -->
        <div class="row mb-3">
            <label for="description" class="col-sm-3 col-form-label">Description</label>
            <div class="col-sm-9">
                <textarea class="form-control" id="description" [(ngModel)]="productRequest.description"
                    name="description" minlength="10" #description="ngModel" required></textarea>
                <div *ngIf="description.invalid && (description.dirty || description.touched)"
                    class="alert alert-danger">
                    <div *ngIf="description.errors?.['required']">Description is required.</div>
                    <div *ngIf="description.errors?.['minlength']">
                        Description must be at least 10 characters long.
                    </div>
                </div>
            </div>
        </div>

        <!-- Quantity field -->
        <div class="row mb-3">
            <label for="quantity" class="col-sm-3 col-form-label">Quantity</label>
            <div class="col-sm-9">
                <input type="number" class="form-control" id="state" [(ngModel)]="productRequest.quantity"
                    name="quantity" min="1" #quantity="ngModel" required>
                <div *ngIf="quantity.invalid && (quantity.dirty || quantity.touched)" class="alert alert-danger">
                    <div *ngIf="quantity.errors?.['required']">Quantity is required.</div>
                    <div *ngIf="quantity.errors?.['min']">
                        Quantity must be greater than or equal to 1.
                    </div>
                </div>
            </div>
        </div>

        <!-- Retail price field -->
        <div class="row mb-3">
            <label for="retailPrice" class="col-sm-3 col-form-label">Retail Price</label>
            <div class="col-sm-9">
                <input type="number" class="form-control" id="state" [(ngModel)]="productRequest.retailPrice"
                    name="retailPrice" min="0" step="0.01" #retailPrice="ngModel" required>
                <div *ngIf="retailPrice.invalid && (retailPrice.dirty || retailPrice.touched)"
                    class="alert alert-danger">
                    <div *ngIf="retailPrice.errors?.['required']">Retail Price is required.</div>
                    <div *ngIf="retailPrice.errors?.['min']">
                        Retail Price must be greater than or equal to 0.
                    </div>
                </div>
            </div>
        </div>

        <!-- Wholesale Price field -->
        <div class="row mb-3">
            <label for="wholesalePrice" class="col-sm-3 col-form-label">Wholesale Price</label>
            <div class="col-sm-9">
                <input type="number" class="form-control" id="state" [(ngModel)]="productRequest.wholesalePrice"
                    name="wholesalePrice" min="0" step="0.01" #wholesalePrice="ngModel" required>
                <div *ngIf="wholesalePrice.invalid && (wholesalePrice.dirty || wholesalePrice.touched)"
                    class="alert alert-danger">
                    <div *ngIf="wholesalePrice.errors?.['required']">Wholesale Price is required.</div>
                    <div *ngIf="wholesalePrice.errors?.['min']">
                        Wholesale Price must be greater than or equal to 0.
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-evenly">
            <button type="submit" class="btn btn-primary">Update</button>
            <a routerLink="/product" class="btn btn-secondary">Cancel</a>
        </div>

        <!-- Display the add product message here -->
        <div *ngIf="addProductMessage" class="alert alert-info">{{ addProductMessage }}</div>
    </form>
</div>